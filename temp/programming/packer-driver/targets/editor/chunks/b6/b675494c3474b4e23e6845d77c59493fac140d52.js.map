{"version":3,"sources":["file:///Users/playgendary/wn/1/test_rockstone/assets/scripts/InputCatcher.ts"],"names":["_decorator","Component","Node","director","Events","InputType","ccclass","InputCatcher","onEnable","handleSubscription","onDisable","activated","func","node","EventType","MOUSE_MOVE","onMouseMove","MOUSE_UP","onMouseUp","event","emit","INPUT","Move","Up","active"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;;AAG/BC,MAAAA,M;;AACAC,MAAAA,S;;;;;;;;;OAHD;AAAEC,QAAAA;AAAF,O,GAAcN,U;;8BAMPO,Y,WADZD,OAAO,CAAC,cAAD,C,gBAAR,MACaC,YADb,SACkCN,SADlC,CAC4C;AACxCO,QAAAA,QAAQ,GAAG;AACP,eAAKC,kBAAL,CAAwB,IAAxB;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,eAAKD,kBAAL,CAAwB,KAAxB;AACH;;AAEOA,QAAAA,kBAAkB,CAACE,SAAD,EAAY;AAClC,gBAAMC,IAAI,GAAGD,SAAS,GAAG,IAAH,GAAU,KAAhC;AAEA,eAAKE,IAAL,CAAUD,IAAV,EAAgBV,IAAI,CAACY,SAAL,CAAeC,UAA/B,EAA2C,KAAKC,WAAhD,EAA6D,IAA7D;AACA,eAAKH,IAAL,CAAUD,IAAV,EAAgBV,IAAI,CAACY,SAAL,CAAeG,QAA/B,EAAyC,KAAKC,SAA9C,EAAyD,IAAzD;AACH;;AAEOF,QAAAA,WAAW,CAACG,KAAD,EAAQ;AACvBhB,UAAAA,QAAQ,CAACiB,IAAT,CAAc;AAAA;AAAA,gCAAOC,KAArB,EAA4B;AAAA;AAAA,sCAAUC,IAAtC,EAA4CH,KAA5C,EAAmD,IAAnD;AACH;;AAEOD,QAAAA,SAAS,CAACC,KAAD,EAAQ;AACrBhB,UAAAA,QAAQ,CAACiB,IAAT,CAAc;AAAA;AAAA,gCAAOC,KAArB,EAA4B;AAAA;AAAA,sCAAUE,EAAtC,EAA0CJ,KAA1C,EAAiD,IAAjD;AACA,eAAKN,IAAL,CAAUW,MAAV,GAAmB,KAAnB;AACH;;AAvBuC,O","sourcesContent":["import { _decorator, Component, Node, director } from 'cc';\r\nconst { ccclass } = _decorator;\r\n\r\nimport Events from './Events';\r\nimport InputType from './InputType';\r\n\r\n@ccclass('InputCatcher')\r\nexport class InputCatcher extends Component {\r\n    onEnable() {\r\n        this.handleSubscription(true);\r\n    }\r\n\r\n    onDisable() {\r\n        this.handleSubscription(false);\r\n    }\r\n\r\n    private handleSubscription(activated) {\r\n        const func = activated ? 'on' : 'off';\r\n\r\n        this.node[func](Node.EventType.MOUSE_MOVE, this.onMouseMove, this);\r\n        this.node[func](Node.EventType.MOUSE_UP, this.onMouseUp, this);\r\n    }\r\n\r\n    private onMouseMove(event) {\r\n        director.emit(Events.INPUT, InputType.Move, event, this);\r\n    }\r\n\r\n    private onMouseUp(event) {\r\n        director.emit(Events.INPUT, InputType.Up, event, this);\r\n        this.node.active = false;\r\n    }\r\n}\r\n"]}